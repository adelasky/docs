# 第三章 数据链路层

## 功能

一些基本概念：

- 结点：主机、路由器。
- 链路（物理通道）：双绞线、微波、光纤。
- 数据链路（逻辑通道）：并未加入协议和硬件，只是一种抽象的通道。
- 帧：数据链路层的协议数据单元，用来封装网络层数据报。

特点：搬运，链接，将物理层可能出错的物理连接改为逻辑上无差错的数据链路。

![](https://i0.hdslb.com/bfs/album/6a1920b4a46cac2f32d61ed5e24096f009de5784.png)

功能：

- 为网络层提供服务。

- 链路管理（连接的建立、维持和释放）。
- 组帧。
- 流量控制。
- 差错控制。

> 为网络层提供的服务：
>
> - 无确认无连接服务（实时通信）。
> - 有确认无连接服务。
> - 有确认面向连接服务。

### 封装成帧和透明传输

概念：为一段数据添加首部和尾部。接收端能够通过首部和尾部的标记识别帧的开始和结束。

![](https://i0.hdslb.com/bfs/album/1d2b051dbd6a21b72e82df36f8c84f607f1086ac.png)

首部和尾部拥有众多控制信息，其中一个重要作用是：**帧定界**。

透明传输：无论所传数据是怎样的比特组合，都应当能够在链路上传送。当某一段比特流和控制信息一致时，需要采取适当措施进行转换。

#### 一些组帧方法：

1.字符计数法：使用帧首部一个字节来表明帧内字符数。

![](https://i0.hdslb.com/bfs/album/1cbc3146bb94a0685e075c600f3ef964c7079f22.png)

不足：帧首位出错则全部出错。

2.字符填充法：目的是为了防止错误寻找帧边界。

![](https://i0.hdslb.com/bfs/album/79fae00456f744f4a35ad0bad8e380a74749b94e.png)

实现过程：转义字符。

![](https://i0.hdslb.com/bfs/album/3b0195d6cea13729f523f1694c7b4a0bac3ecbc0.png)

不足：实现的复杂性和不兼容性。

3.零比特填充法：解决帧首部和尾部均为 `01111110`，数据部分同样出现 `01111110` 的问题。

![](https://i0.hdslb.com/bfs/album/668dd23e84129b16f6f9e8f466d4eef55ea60b5d.png)

优点：在传输中能够传输任何比特流，而不会引起对帧边界的判断错误。

4.违规编码法：主要用于曼彻斯特编码，使用“高-高”和“低-低”编码来界定帧的起始和终止。

![](https://i0.hdslb.com/bfs/album/31f9bfff3a89cb470d899bf744d7fd4c92c04751.png)

### 差错控制

差错的产生都是由于噪声引起的：

- 噪声产生的全局性：电器线路特性所产生的随机噪声（热噪声）是信道固有的。能够通过提高传感器信噪比来减少干扰。
- 噪声产生的局部性：外界特定的短暂原因造成的冲击噪声，这是产生差错的主要原因。通常利用编码技术解决。

差错类型：

- 位错：比特位出错，0 变成 1，1 变成 0。
- 帧错：丢失、重复和失序（比特流）。

一般来说，有线链路的传输使用无确认无连接服务，无线链路的传输使用有确认无连接服务或有确认面向连接服务。

检错编码：奇偶校验码、循环冗余码 CRC。

纠错编码：海明码。

> 数据链路层的编码针对一组比特（比特流），物理层的编码针对单个比特。

1.奇偶校验码：奇校验码中 “1” 的个数为奇数，偶数相反。

不足：只能解决一位比特跳变，检错能力不足。

2.循环冗余码 CRC：使用 FCS 帧检验序列进行检错。

![](https://i0.hdslb.com/bfs/album/43bef0eb4715cf556317a1a4396b71b1e4b9e9c6.png)

![](https://i0.hdslb.com/bfs/album/160a090191592db7e5d27f57365261dbf0f61eaf.png)

![](https://i0.hdslb.com/bfs/album/7e538d907a4205d549449fa2db4475bdd0e08c00.png)

3.海明码：

编码集海明码码距：编码系统中任意两个合法编码的海明码码距最小值（异或运算）。

![](https://i0.hdslb.com/bfs/album/38f9142f7a0b1f275da38b1f3bf62b9fae358cb9.png)

校验码求法：

![](https://i0.hdslb.com/bfs/album/5399acc4cd23db4ba88624b8e169fd6e5fac1e89.png)

校验方法：

![](https://i0.hdslb.com/bfs/album/1da724d81b3be99561c5dd66bf9ca49690051c9a.png)

![](https://i0.hdslb.com/bfs/album/6344e140fd7dc7bc23523504c2de6524c6b88c2d.png)

### 滑动窗口机制



## 应用

### 两种链路和信道



### 链路层设备

